!function(){"use strict";var e=document.querySelector(".popup_edit-profile"),t=document.querySelector(".popup__form-input_type_name"),n=document.querySelector(".profile__value-type-name"),o=document.querySelector(".popup__form-input_type_profession"),r=document.querySelector(".profile__value-type-profession"),i=document.querySelector(".profile__edit-button"),s={inputSelector:".popup__form-input",submitButtonSelector:".popup__form-save-button",inactiveButtonClass:"popup__form-save-button_inactive",inputErrorClass:"popup__form-input_type_error",errorClass:"popup__form-input-error_active"},u=document.querySelector(".popup_add-card"),a=document.querySelector(".cards__list"),c=".card-template",l=u.querySelector(".popup__form-submit"),p=document.querySelector(".profile__add-button"),f=document.querySelector(".popup_card-image");function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"checkInitialFormValidity",value:function(){var e=this;this._inputList.forEach((function(t){e._hideError(t)})),this._toggleButtonState(this._inputList,this._buttonElement)}}])&&d(t.prototype,n),e}();function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var y=function(){function e(t,n){var o=t.item,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._item=o,this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._item.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&h(t.prototype,n),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var v=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._template=document.querySelector(n).content,this._handleCardClick=o}var t,n;return t=e,(n=[{key:"_addEventListeners",value:function(){var e=this,t=this._card.querySelector(".card__delete"),n=this._card.querySelector(".card__picture"),o=this._card.querySelector(".card__name"),r=this._card.querySelector(".card__heart");o.textContent=this._name,n.src=this._link,n.alt="A picture of ".concat(this._name),r.addEventListener("click",(function(e){e.target.classList.toggle("card__heart_active")})),t.addEventListener("click",(function(){t.closest(".card").remove()})),n.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"render",value:function(){return this._card=this._template.querySelector(".card").cloneNode(!0),this._addEventListeners(),this._card}}])&&m(t.prototype,n),e}();function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-icon"))&&e.close()}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}}])&&b(t.prototype,n),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function g(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(r){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function s(e){var t,n=e.popupSelector,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,n))._handleFormSubmit=o,t.close=t.close.bind(L(t)),t}return t=s,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(".popup__form-input"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-icon"))&&e.close()})),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__form-submit").reset()}}])&&S(t.prototype,n),s}(E);function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var q=function(){function e(t){var n=t.profileName,o=t.profileProfession;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=n,this._profileProfession=o}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return this._userInfoValues={name:this._profileName.textContent,profession:this._profileProfession.textContent},this._userInfoValues}},{key:"setUserInfo",value:function(e){var t=e.popupInputName,n=e.popupInputProfession;this._profileName.textContent=t,this._profileProfession.textContent=n}}],n&&O(t.prototype,n),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function x(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(s,e);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(o);if(r){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).open=t.open.bind(V(t)),t}return t=s,(n=[{key:"open",value:function(e,t){var n=this._popup.querySelector(".popup__image-photo");this._popup.querySelector(".popup__image-title").textContent=t,n.src=e,n.alt="A picture of ".concat(t),this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}}])&&I(t.prototype,n),s}(E),N=new _(s,e.querySelector(".popup__form-submit"));N.enableValidation();var F=new q({profileName:n,profileProfession:r}),A=new j({popupSelector:e,handleFormSubmit:function(e){F.setUserInfo({popupInputName:e.fullName,popupInputProfession:e.profession}),A.close()}});A.setEventListeners(),i.addEventListener("click",(function(){var e=F.getUserInfo();t.value=e.name,o.value=e.profession,N.checkInitialFormValidity(),A.open()}));var D=new T(f);D.setEventListeners();var U=new y({item:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){var t=new v(e,c,D.open).render();U.addItem(t)}},a);U.renderItems(),new _(s,l).enableValidation();var M=new j({popupSelector:u,handleFormSubmit:function(e){var t=new v(e,c,D.open).render();a.prepend(t),M.close()}});M.setEventListeners(),p.addEventListener("click",(function(){M.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFGLEtBRTdCcEgsR0FFSG1ILEVBQWdCSSxjQVFhLElBQUlsSCxFQUFjWixFQUFnQlMsR0FDMUN1RyxtQkFFckIsSUFBTWUsRUFBZSxJQUFJL0IsRUFBYyxDQUNuQ1QsY0FBZWpGLEVBQ2YyRixpQkFBa0IsU0FBQ3pDLEdBQ2YsSUFDTXdFLEVBRE8sSUFBSWpFLEVBQUtQLEVBQU1oRCxFQUFzQmlILEVBQVc5QixNQUNwQ2lDLFNBQ3pCckgsRUFBVTBILFFBQVFELEdBQ2xCRCxFQUFhbkMsV0FJckJtQyxFQUFhVixvQkFFYjNHLEVBQVV1QyxpQkFBaUIsU0FBUyxXQUNoQzhFLEVBQWFwQyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zY3JpcHRzL3V0aWxzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc2NyaXB0cy91dGlscy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUG9wdXAgRWRpdCBQcm9maWxlIENvbnN0YW50c1xuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfZWRpdC1wcm9maWxlXCIpO1xuY29uc3QgcG9wdXBJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X3R5cGVfbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX192YWx1ZS10eXBlLW5hbWVcIik7XG5jb25zdCBwb3B1cElucHV0UHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0taW5wdXRfdHlwZV9wcm9mZXNzaW9uXCIpO1xuY29uc3QgcHJvZmlsZVByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3ZhbHVlLXR5cGUtcHJvZmVzc2lvblwiKTtcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuXG5cbmNvbnN0IHNldHRpbmdzQ29uZmlnID0ge1xuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLXNhdmUtYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fZm9ybS1zYXZlLWJ1dHRvbl9pbmFjdGl2ZVwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9fZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZm9ybS1pbnB1dC1lcnJvcl9hY3RpdmVcIlxufTtcblxuLy8gUG9wdXAgQWRkIENhcmQgQ29uc3RhbnRzXG5jb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2FkZC1jYXJkXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIuY2FyZC10ZW1wbGF0ZVwiO1xuY29uc3QgcG9wdXBBZGRDYXJkUG9wdXBGb3JtU3VibWl0ID0gcG9wdXBBZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tc3VibWl0XCIpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgcG9wdXBDYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2NhcmQtaW1hZ2VcIik7XG5cblxuY29uc3QgaW5pdGlhbENhcmRzID0gW3tcbiAgICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXG4gICAgfVxuXTtcblxuXG5cbmV4cG9ydCB7XG4gICAgLy8gUG9wdXAgRWRpdCBQcm9maWxlIENvbnN0YW50c1xuICAgIHBvcHVwRWRpdFByb2ZpbGUsXG4gICAgcG9wdXBJbnB1dE5hbWUsXG4gICAgcHJvZmlsZU5hbWUsXG4gICAgcG9wdXBJbnB1dFByb2Zlc3Npb24sXG4gICAgcHJvZmlsZVByb2Zlc3Npb24sXG4gICAgZWRpdEJ1dHRvbixcbiAgICBzZXR0aW5nc0NvbmZpZyxcblxuICAgIC8vIFBvcHVwIEFkZCBDYXJkIENvbnN0YW50c1xuICAgIHBvcHVwQWRkQ2FyZCxcbiAgICBjYXJkc0xpc3QsXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgcG9wdXBBZGRDYXJkUG9wdXBGb3JtU3VibWl0LFxuICAgIGFkZEJ1dHRvbixcbiAgICBwb3B1cENhcmRJbWFnZSxcblxuICAgIGluaXRpYWxDYXJkc1xufTtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgX3Nob3dFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG5cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgY2hlY2tJbml0aWFsRm9ybVZhbGlkaXR5KCkge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW0sIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2l0ZW0gPSBpdGVtO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbS5mb3JFYWNoKGl0ZW0gPT5cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFRlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQ7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB9XG5cbiAgICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcbiAgICAgICAgY29uc3QgY2FyZFBpY3R1cmUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGljdHVyZVwiKTtcbiAgICAgICAgY29uc3QgY2FyZE5hbWUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKTtcbiAgICAgICAgY29uc3QgY2FyZEhlYXJ0ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0XCIpO1xuXG4gICAgICAgIGNhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgY2FyZFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcbiAgICAgICAgY2FyZFBpY3R1cmUuYWx0ID0gYEEgcGljdHVyZSBvZiAke3RoaXMuX25hbWV9YDtcblxuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLy8vTGlrZSBVbmxpa2UgLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBjYXJkSGVhcnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19oZWFydF9hY3RpdmVcIik7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLyBEZWxldGUgQ2FyZCAvLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkZWxldGVCdXR0b24uY2xvc2VzdChcIi5jYXJkXCIpO1xuICAgICAgICAgICAgbGlzdEl0ZW0ucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLyBJbWFnZSBQb3B1cCAvLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGNhcmRQaWN0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLl9jYXJkID0gdGhpcy5fdGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuXG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1pY29uXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL3V0aWxzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgICAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcblxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3JtLWlucHV0XCIpO1xuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtaWNvblwiKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tc3VibWl0XCIpLnJlc2V0KCk7XG4gICAgfVxuXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZVByb2Zlc3Npb24gfSkge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IHByb2ZpbGVOYW1lO1xuICAgICAgICB0aGlzLl9wcm9maWxlUHJvZmVzc2lvbiA9IHByb2ZpbGVQcm9mZXNzaW9uO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICB0aGlzLl91c2VySW5mb1ZhbHVlcyA9IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgcHJvZmVzc2lvbjogdGhpcy5fcHJvZmlsZVByb2Zlc3Npb24udGV4dENvbnRlbnRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvVmFsdWVzO1xuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHsgcG9wdXBJbnB1dE5hbWUsIHBvcHVwSW5wdXRQcm9mZXNzaW9uIH0pIHtcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwb3B1cElucHV0TmFtZTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZVByb2Zlc3Npb24udGV4dENvbnRlbnQgPSBwb3B1cElucHV0UHJvZmVzc2lvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL3V0aWxzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4obGluaywgbmFtZSkge1xuICAgICAgICBjb25zdCBwb3B1cEltYWdlUGhvdG8gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1waG90b1wiKTtcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIikudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBwb3B1cEltYWdlUGhvdG8uc3JjID0gbGluaztcbiAgICAgICAgcG9wdXBJbWFnZVBob3RvLmFsdCA9IGBBIHBpY3R1cmUgb2YgJHtuYW1lfWA7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7XG4gICAgLy8gUG9wdXAgRWRpdCBQcm9maWxlIENvbnN0YW50c1xuICAgIHBvcHVwRWRpdFByb2ZpbGUsXG4gICAgcG9wdXBJbnB1dE5hbWUsXG4gICAgcHJvZmlsZU5hbWUsXG4gICAgcG9wdXBJbnB1dFByb2Zlc3Npb24sXG4gICAgcHJvZmlsZVByb2Zlc3Npb24sXG4gICAgZWRpdEJ1dHRvbixcbiAgICBzZXR0aW5nc0NvbmZpZyxcblxuICAgIC8vIFBvcHVwIEFkZCBDYXJkIENvbnN0YW50c1xuICAgIHBvcHVwQWRkQ2FyZCxcbiAgICBjYXJkc0xpc3QsXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgcG9wdXBBZGRDYXJkUG9wdXBGb3JtU3VibWl0LFxuICAgIGFkZEJ1dHRvbixcbiAgICBwb3B1cENhcmRJbWFnZSxcblxuICAgIGluaXRpYWxDYXJkc1xufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanNcIjtcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vIEVkaXQgUHJvZmlsZSBQb3B1cCAvLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5nc0NvbmZpZywgcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLXN1Ym1pdFwiKSk7XG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7IHByb2ZpbGVOYW1lLCBwcm9maWxlUHJvZmVzc2lvbiB9KTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cEVkaXRQcm9maWxlLFxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHsgcG9wdXBJbnB1dE5hbWU6IGl0ZW0uZnVsbE5hbWUsIHBvcHVwSW5wdXRQcm9mZXNzaW9uOiBpdGVtLnByb2Zlc3Npb24gfSk7XG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICB9XG59KTtcblxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCB1c2VySW5mb1RvRGlzcGxheUluRm9ybSA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgcG9wdXBJbnB1dE5hbWUudmFsdWUgPSB1c2VySW5mb1RvRGlzcGxheUluRm9ybS5uYW1lO1xuICAgIHBvcHVwSW5wdXRQcm9mZXNzaW9uLnZhbHVlID0gdXNlckluZm9Ub0Rpc3BsYXlJbkZvcm0ucHJvZmVzc2lvbjtcbiAgICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuY2hlY2tJbml0aWFsRm9ybVZhbGlkaXR5KCk7XG4gICAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG5cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vIHNpeCBpbml0aWFsIGNhcmRzIC8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cENhcmRJbWFnZSk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGluaXRpYWxDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG5cbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGl0ZW0sIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCBpbWFnZVBvcHVwLm9wZW4pO1xuICAgICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ld0NhcmQucmVuZGVyKCk7XG4gICAgICAgIGluaXRpYWxDYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmRFbGVtZW50KTtcbiAgICB9XG59LCBjYXJkc0xpc3QpO1xuXG5pbml0aWFsQ2FyZExpc3QucmVuZGVySXRlbXMoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLyBBZGQgQ2FyZCBQb3B1cCAvLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5nc0NvbmZpZywgcG9wdXBBZGRDYXJkUG9wdXBGb3JtU3VibWl0KTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQWRkQ2FyZCxcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgY2FyZFRlbXBsYXRlU2VsZWN0b3IsIGltYWdlUG9wdXAub3Blbik7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5yZW5kZXIoKTtcbiAgICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9XG59KTtcblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcbiJdLCJuYW1lcyI6WyJwb3B1cEVkaXRQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBJbnB1dE5hbWUiLCJwcm9maWxlTmFtZSIsInBvcHVwSW5wdXRQcm9mZXNzaW9uIiwicHJvZmlsZVByb2Zlc3Npb24iLCJlZGl0QnV0dG9uIiwic2V0dGluZ3NDb25maWciLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInBvcHVwQWRkQ2FyZCIsImNhcmRzTGlzdCIsImNhcmRUZW1wbGF0ZVNlbGVjdG9yIiwicG9wdXBBZGRDYXJkUG9wdXBGb3JtU3VibWl0IiwiYWRkQnV0dG9uIiwicG9wdXBDYXJkSW1hZ2UiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbSIsInJlbmRlcmVyIiwiX2l0ZW0iLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsIkNhcmQiLCJjYXJkRGF0YSIsImhhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsImNvbnRlbnQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiZGVsZXRlQnV0dG9uIiwiX2NhcmQiLCJjYXJkUGljdHVyZSIsImNhcmROYW1lIiwiY2FyZEhlYXJ0Iiwic3JjIiwiYWx0IiwiZXZlbnQiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiY2xvbmVOb2RlIiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsImNvbnRhaW5zIiwia2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVQcm9mZXNzaW9uIiwiX3VzZXJJbmZvVmFsdWVzIiwicHJvZmVzc2lvbiIsIlBvcHVwV2l0aEltYWdlIiwicG9wdXBJbWFnZVBob3RvIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByb2ZpbGVJbmZvIiwiZWRpdFByb2ZpbGVQb3B1cCIsInNldFVzZXJJbmZvIiwiZnVsbE5hbWUiLCJzZXRFdmVudExpc3RlbmVycyIsInVzZXJJbmZvVG9EaXNwbGF5SW5Gb3JtIiwiZ2V0VXNlckluZm8iLCJjaGVja0luaXRpYWxGb3JtVmFsaWRpdHkiLCJpbWFnZVBvcHVwIiwiaW5pdGlhbENhcmRMaXN0IiwibmV3Q2FyZEVsZW1lbnQiLCJyZW5kZXIiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJhZGRDYXJkUG9wdXAiLCJjYXJkRWxlbWVudCIsInByZXBlbmQiXSwic291cmNlUm9vdCI6IiJ9